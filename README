Обедающие философы

5 философов сидят за столом. Они могут быть в 2-х взаимоисключающих состояниях: думать и есть. Между каждым философом лежит 1 вилка, а перед каждым -- тарелка. Для того чтобы начать есть, философу нужно взять 2 вилки (левую и правую). Сначала философ берет левую, а затем правую.
Задание: Необходимо смоделировать эту ситуацию в программе в виде 5 нитей исполнения (для каждого философа). Работа нитей должна фиксироваться в виде журнала и отображаться на экране. Например:
12:01:10.353 Философ 1 думает. Состояни вилок: 01100
12:01:10.389 Философ 5 взял левую вилку (№5). Состояни вилок: 01101
12:01:10.390 Философ 5 взял правую вилку (№1). Состояни вилок: 11101
12:01:10.391 Философ 5 начал есть.
12:01:11.800 Философ 3 закончил есть.
12:01:11.812 Философ 4 взял левую вилку (№4). Состояни вилок: 11111
12:01:11.813 Философ 4 не смог взять правую вилку (№5). Состояни вилок: 11111
12:01:11.815 Философ 2 положил левую вилку (№2). Состояни вилок: 10111
...

При этом не должно возникать ситуаций deadlock, когда каждый философ взял по одной вилке и ожидает вторую вилку.
